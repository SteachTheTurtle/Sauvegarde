Version 4
SHEET 1 1212 680
WIRE -1136 -1552 -1280 -1552
WIRE -976 -1552 -1008 -1552
WIRE -720 -1552 -848 -1552
WIRE -352 -1552 -576 -1552
WIRE -32 -1552 -96 -1552
WIRE 288 -1552 96 -1552
WIRE 352 -1552 288 -1552
WIRE -1280 -1536 -1280 -1552
WIRE -1280 -1424 -1280 -1456
WIRE -1072 -1392 -1072 -1488
WIRE -960 -1392 -1072 -1392
WIRE -1120 -1168 -1136 -1168
WIRE -960 -1168 -992 -1168
WIRE -704 -1168 -832 -1168
WIRE -336 -1168 -560 -1168
WIRE -16 -1168 -80 -1168
WIRE 304 -1168 112 -1168
WIRE 368 -1168 304 -1168
WIRE -1056 -1008 -1056 -1104
WIRE -1024 -1008 -1056 -1008
WIRE -976 -1008 -1024 -1008
WIRE -832 -1008 -896 -1008
WIRE -832 -992 -832 -1008
WIRE -1024 -976 -1024 -1008
WIRE -1024 -880 -1024 -912
WIRE -832 -880 -832 -912
WIRE 64 -800 -48 -800
WIRE 192 -800 144 -800
WIRE 288 -800 256 -800
WIRE -816 -720 -880 -720
WIRE -48 -688 -48 -800
WIRE 64 -688 -48 -688
WIRE 192 -688 144 -688
WIRE 288 -688 288 -800
WIRE 288 -688 256 -688
WIRE 400 -688 288 -688
WIRE 448 -688 400 -688
WIRE -816 -672 -816 -720
WIRE -640 -640 -688 -640
WIRE -48 -640 -48 -688
WIRE 400 -640 400 -688
WIRE -496 -624 -576 -624
WIRE -96 -624 -240 -624
WIRE -880 -608 -1152 -608
WIRE -640 -608 -752 -608
WIRE -96 -576 -128 -576
WIRE -1152 -560 -1152 -608
WIRE -48 -528 -48 -560
WIRE 400 -528 400 -560
WIRE 400 -528 -48 -528
WIRE -1152 -448 -1152 -480
WIRE -688 -448 -688 -640
WIRE -688 -448 -1152 -448
WIRE -128 -448 -128 -576
WIRE -128 -448 -688 -448
WIRE -128 -432 -128 -448
WIRE 400 -432 400 -528
WIRE -128 -320 -128 -352
WIRE -32 -144 -144 -144
WIRE 208 -144 48 -144
WIRE 528 -144 272 -144
WIRE -608 -16 -736 -16
WIRE -480 -16 -608 -16
WIRE -224 -16 -400 -16
WIRE -144 -16 -224 -16
WIRE -32 -16 -144 -16
WIRE 144 -16 48 -16
WIRE 208 -16 144 -16
WIRE 528 -16 528 -144
WIRE 528 -16 272 -16
WIRE 576 -16 528 -16
WIRE 672 -16 576 -16
WIRE -736 0 -736 -16
WIRE -608 0 -608 -16
WIRE -224 32 -224 -16
WIRE -144 32 -144 -16
WIRE 528 48 528 -16
WIRE 672 48 672 -16
WIRE -928 112 -1264 112
WIRE -736 112 -736 64
WIRE -736 112 -880 112
WIRE 144 128 144 -16
WIRE -1264 144 -1264 112
WIRE -880 144 -880 112
WIRE -928 160 -928 112
WIRE -1264 240 -1264 224
WIRE -928 240 -928 208
WIRE -928 240 -1264 240
WIRE -880 240 -880 224
WIRE -608 240 -608 64
WIRE -608 240 -880 240
WIRE 144 256 144 208
WIRE -736 288 -736 112
WIRE -608 288 -608 240
WIRE -608 304 -608 288
WIRE 96 336 64 336
WIRE -1264 368 -1264 240
WIRE -736 384 -736 352
WIRE -672 384 -736 384
WIRE -608 384 -608 352
WIRE -608 384 -672 384
WIRE -1264 496 -1264 448
WIRE -672 496 -672 384
WIRE -224 496 -224 96
WIRE -144 496 -144 96
WIRE 144 496 144 352
WIRE 528 512 528 112
WIRE 672 512 672 128
FLAG 144 496 0
FLAG 528 512 0
FLAG -144 496 0
FLAG -224 496 0
FLAG 672 512 0
FLAG 576 -16 Sortie
FLAG -224 -16 Entrée
FLAG 400 -688 Commande
FLAG 400 -432 0
FLAG -1264 496 0
FLAG -128 -320 0
FLAG -672 496 0
FLAG 64 336 Commande
FLAG 304 -1168 Commande_BF
FLAG -880 -720 Commande_BF
FLAG -1280 -1424 0
FLAG 288 -1552 Commande_Courant
FLAG -960 -1392 Sortie
FLAG -832 -880 0
FLAG -1024 -880 0
FLAG -1136 -1168 Commande_Courant
SYMBOL ind 64 -32 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L1
SYMATTR Value 3200µ
SYMBOL cap -160 32 R0
SYMATTR InstName C1
SYMATTR Value 10n
SYMBOL cap -240 32 R0
SYMATTR InstName C2
SYMATTR Value 50n
SYMBOL cap 512 48 R0
SYMATTR InstName C3
SYMATTR Value 305µ
SYMBOL res 656 32 R0
SYMATTR InstName R1
SYMATTR Value 200
SYMBOL voltage -1264 128 R0
WINDOW 0 48 41 Left 2
WINDOW 3 45 68 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 45 96 Left 2
SYMATTR InstName V1
SYMATTR Value PULSE(0 115 0 10u)
SYMBOL voltage -1152 -576 R0
WINDOW 0 48 41 Left 2
WINDOW 3 45 68 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value PULSE(0 10 0 4.998u 1n 1n 5u)
SYMBOL SP_symb\\Bloc\ fonctionnel\\diff1 -768 -560 M180
SYMATTR InstName U1
SYMBOL Digital\\diffschmtbuf -640 -688 R0
SYMATTR InstName A1
SYMBOL SP_symb\\Bloc\ fonctionnel\\ampli1 -368 -624 R0
SYMATTR SpiceLine A=10 Vsat=10
SYMATTR InstName U2
SYMBOL res 128 112 R0
SYMATTR InstName R3
SYMATTR Value 0.315
SYMBOL diode -720 352 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMBOL diode -592 352 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMBOL diode -720 64 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D5
SYMBOL diode -592 64 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D6
SYMBOL res -384 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R_SHUNT
SYMATTR Value 0.001m
SYMBOL diode 208 0 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMBOL res 384 -656 R0
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL nmos 96 256 R0
SYMATTR InstName M1
SYMATTR Value STD95N04
SYMBOL e -48 -656 R0
SYMATTR InstName E1
SYMATTR Value 1
SYMBOL res -144 -448 R0
SYMATTR InstName R6
SYMATTR Value 100Meg
SYMBOL e -880 128 R0
SYMATTR InstName E2
SYMATTR Value 1
SYMBOL res -1280 352 R0
SYMATTR InstName R7
SYMATTR Value 100Meg
SYMBOL diode 208 -128 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMBOL res 64 -160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 0.001m
SYMBOL diode 192 -672 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D7
SYMBOL diode 256 -816 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D8
SYMBOL res 48 -672 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R4
SYMATTR Value 1
SYMBOL res 48 -784 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R8
SYMATTR Value 1
SYMBOL SP_symb\\Bloc\ fonctionnel\\diff1 -1008 -1216 R0
SYMATTR InstName U4
SYMBOL SP_symb\\Bloc\ fonctionnel\\gain 96 -1216 R0
WINDOW 39 0 0 Left 2
SYMATTR SpiceLine G=10
SYMATTR InstName U5
SYMBOL SP_symb\\Bloc\ fonctionnel\\ampli1 -208 -1168 R0
SYMATTR SpiceLine A=0.98 Vsat=0.98
SYMATTR InstName U6
SYMBOL SP_symb\\Bloc\ fonctionnel\\gain -848 -1216 R0
WINDOW 39 0 0 Left 2
SYMATTR InstName U7
SYMBOL SP_symb\\Bloc\ fonctionnel\\Cor_P_I -656 -1168 R0
SYMATTR SpiceLine K=10
SYMATTR SpiceLine2 Ti=10
SYMATTR InstName U3
SYMBOL voltage -1280 -1552 R0
WINDOW 0 48 41 Left 2
WINDOW 3 45 68 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V4
SYMATTR Value 210
SYMBOL SP_symb\\Bloc\ fonctionnel\\diff1 -1024 -1600 R0
SYMATTR InstName U8
SYMBOL SP_symb\\Bloc\ fonctionnel\\gain 80 -1600 R0
WINDOW 39 0 0 Left 2
SYMATTR SpiceLine G=2/210
SYMATTR InstName U9
SYMBOL SP_symb\\Bloc\ fonctionnel\\ampli1 -224 -1552 R0
SYMATTR SpiceLine A=0.98 Vsat=0.98
SYMATTR InstName U10
SYMBOL SP_symb\\Bloc\ fonctionnel\\gain -864 -1600 R0
WINDOW 39 0 0 Left 2
SYMATTR InstName U11
SYMBOL SP_symb\\Bloc\ fonctionnel\\Cor_P_I -672 -1552 R0
SYMATTR SpiceLine K=10
SYMATTR SpiceLine2 Ti=1
SYMATTR InstName U12
SYMBOL bi -832 -992 R0
SYMATTR InstName B1
SYMATTR Value V=-I(R_SHUNT)
SYMBOL res -992 -992 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R10
SYMATTR Value 1m
SYMBOL cap -1040 -976 R0
SYMATTR InstName C4
SYMATTR Value 1µ
TEXT -1248 -288 Left 2 !.tran 0 20m 0 100n startup
TEXT -1248 -384 Left 2 !.inc SP.lib
TEXT -1248 -248 Left 2 !.options gmin=1e-10\n.options abstol=1e-10\n.options reltol=0.003\n.options cshunt=1e-15
